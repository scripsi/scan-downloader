<h1>Preview</h1>

<iframe src="" height="400" width="100%" id="FileFrame"></iframe>

<script id="FileListManager">

  const pdfViewerURL = "assets/pdfjs/web/basic-viewer.html?file=%2F"; 

  var fileListItems = document.getElementsByTagName('ul')[0].getElementsByTagName('li');
  var fileNames = Array();
  for (let i = 0; i <= fileListItems.length - 1; i++) {
    var filePath = fileListItems[i].getElementsByTagName('a')[0].href;
    var fileParts = filePath.split('/');
    var fileName = fileParts.pop();
  	fileNames.push(fileName);
  }
  var fileSelect = document.getElementById('FileList');
  for (let i = 0; i < fileNames.length; i++) {
  	var opt = document.createElement('option');
  	opt.text = fileNames[i];
  	opt.value = fileNames[i];
  	fileSelect.add(opt);
  }

  fileSelect.onchange = function() {
  	console.log('Change detected')
  	newFile = fileSelect.value;
  	newURL = pdfViewerURL + newFile;
  	fileFrame = document.getElementById('FileFrame');
  	fileFrame.src = newURL;
  }

</script>
